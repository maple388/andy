<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‚ºæ°”è‚¿HRCTå½±åƒäº¤äº’æŒ‡å— (å«AIåŠŸèƒ½)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #F8F5F2; /* Soft Beige */
            color: #3D3D3D; /* Dark Gray */
            transition: background-color 0.3s ease;
        }
        .dark-mode body {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        .tab-button {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            color: #6A8EAE; /* Muted Blue-Gray */
            font-weight: 500;
        }
        .tab-button:hover, .tab-button.active {
            color: #3D3D3D; /* Dark Gray */
            border-bottom-color: #D8A77F; /* Soft Terracotta */
        }
        .dark-mode .tab-button:hover, .dark-mode .tab-button.active {
            color: #e2e8f0;
        }
        .content-section {
            display: none;
            padding-top: 1.5rem;
        }
        .content-section.active {
            display: block;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem; /* 12px */
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            padding: 1.5rem; /* 24px */
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
        }
        .dark-mode .card {
            background-color: #2d3748;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        .card-title {
            font-size: 1.5rem; /* 24px */
            font-weight: 700;
            color: #6A8EAE; /* Muted Blue-Ggray */
            margin-bottom: 1rem;
            border-bottom: 2px solid #A4B8C4; /* Light Blue-Gray */
            padding-bottom: 0.5rem;
            transition: all 0.3s ease;
        }
        .dark-mode .card-title {
            color: #90cdf4;
            border-bottom-color: #4a5568;
        }
        .sub-card-title {
            font-size: 1.25rem; /* 20px */
            font-weight: 600;
            color: #8AA399; /* Muted Sage Green */
            margin-top: 1rem;
            margin-bottom: 0.75rem;
            transition: all 0.3s ease;
        }
        .dark-mode .sub-card-title {
            color: #68d391;
        }
        .ai-feature-title {
            font-size: 1.25rem; /* 20px */
            font-weight: 600;
            color: #79A2A0; /* AI Accent Color - Muted Teal */
            margin-top: 1rem;
            margin-bottom: 0.75rem;
            transition: all 0.3s ease;
        }
        .dark-mode .ai-feature-title {
            color: #4fd1c5;
        }
        .highlight {
            color: #D8A77F; /* Soft Terracotta */
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .dark-mode .highlight {
            color: #f6ad55;
        }
        .table-custom {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .table-custom th, .table-custom td {
            border: 1px solid #A4B8C4; /* Light Blue-Gray */
            padding: 0.75rem;
            text-align: left;
            vertical-align: top;
        }
        .table-custom th {
            background-color: #E6EBF0; /* Lighter shade of blue-gray */
            color: #3D3D3D;
            font-weight: 600;
        }
        .dark-mode .table-custom th {
            background-color: #4a5568;
            color: #e2e8f0;
        }
        .dark-mode .table-custom th, 
        .dark-mode .table-custom td {
            border: 1px solid #4a5568;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Max width for readability */
            margin-left: auto;
            margin-right: auto;
            height: 350px; /* Base height */
            max-height: 400px; /* Max height */
        }
        @media (min-width: 768px) { /* md breakpoint */
            .chart-container {
                height: 400px;
            }
        }

        .diagram-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 1rem auto;
            padding: 1rem;
            border: 1px solid #A4B8C4;
            border-radius: 0.5rem;
            background-color: #FDFBF7; /* Slightly off-white for diagram bg */
            max-width: 300px;
            min-height: 150px;
            position: relative;
            transition: all 0.3s ease;
        }
        .dark-mode .diagram-container {
            border: 1px solid #4a5568;
            background-color: #2d3748;
        }
        .diagram-title {
            font-weight: 600;
            color: #6A8EAE;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }
        .dark-mode .diagram-title {
            color: #90cdf4;
        }
        .lobule-base-interactive {
            width: 100px;
            height: 100px;
            border: 2px solid #6A8EAE;
            border-radius: 50%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #fff;
            cursor: help;
            transition: all 0.3s ease;
        }
        .dark-mode .lobule-base-interactive {
            border: 2px solid #90cdf4;
            background-color: #2d3748;
        }
         .lobule-base-interactive:hover::after {
            content: attr(data-info);
            position: absolute;
            bottom: 105%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #3D3D3D;
            color: white;
            padding: 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            white-space: pre-wrap;
            z-index: 10;
            width: max-content;
            max-width: 250px;
            text-align: left;
        }
        .dark-mode .lobule-base-interactive:hover::after {
            background-color: #4a5568;
        }

        .cle-laa-interactive { width: 35px; height: 35px; background-color: rgba(216, 167, 127, 0.3); border: 1px dashed #D8A77F; border-radius: 50%; position: absolute; }
        .dark-mode .cle-laa-interactive { background-color: rgba(246, 173, 85, 0.3); border: 1px dashed #f6ad55; }
        .cle-dot-interactive { width: 8px; height: 8px; background-color: #D8A77F; border-radius: 50%; position: absolute; }
        .dark-mode .cle-dot-interactive { background-color: #f6ad55; }
        .ple-laa-interactive { width: 100%; height: 100%; background-color: rgba(216, 167, 127, 0.15); border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .dark-mode .ple-laa-interactive { background-color: rgba(246, 173, 85, 0.15); }
        .ple-vessel-interactive { width: 4px; height: 50px; background-color: rgba(164, 184, 196, 0.7); transform: rotate(45deg); position: absolute; }
        .dark-mode .ple-vessel-interactive { background-color: rgba(113, 128, 150, 0.7); }
        .ple-vessel-interactive::before { content: ''; width: 4px; height: 50px; background-color: rgba(164, 184, 196, 0.7); position: absolute; transform: rotate(90deg); }
        .dark-mode .ple-vessel-interactive::before { background-color: rgba(113, 128, 150, 0.7); }
        .pse-laa-interactive { width: 25px; height: 25px; background-color: rgba(216, 167, 127, 0.3); border: 1px dashed #D8A77F; border-radius: 50%; position: absolute; }
        .dark-mode .pse-laa-interactive { background-color: rgba(246, 173, 85, 0.3); border: 1px dashed #f6ad55; }
        .pse-laa-1-interactive { top: -8px; left: 30%; }
        .pse-laa-2-interactive { top: 50%; right: -12px; transform: translateY(-50%); }
        .pse-laa-3-interactive { bottom: -8px; left: 40%; }

        .diff-diag-container { display: flex; justify-content: space-around; margin-top: 1rem; gap: 1rem; }
        .diff-diag-item { flex: 1; display: flex; flex-direction: column; align-items: center; text-align: center; padding: 0.5rem; border: æç®€ border: 1px solid #A4B8C4; border-radius: 0.5rem; transition: all 0.3s ease; }
        .dark-mode .diff-diag-item { border: 1px solid #4a5568; }
        .diff-diag-shape { width: 80px; height: 80px; display: flex; align-items: center; justify-content: center; margin-bottom: 0.5rem; background-color: #fff; border: 2px solid transparent; transition: all 0.3s ease; }
        .dark-mode .diffæç®€diag-shape { background-color: #2d3748; }
        .emphysema-no-wall-diag { border-color: #D8A77F; border-style: dashed; border-radius: 30%; }
        .dark-mode .emphysema-no-wall-diag { border-color: #f6ad55; }
        .true-cyst-wall-diag { border-color: #8AA399; border-style: solid; border-radius: 50%; }
        .dark-mode .true-cyst-wall-diag { border-color: #68d391; }
        .paracicatricial-diag .scar-diag { width: 25px; height: 60px; background-color: #A4B8C4; margin-right: -5px; z-index:0; transition: all 0.3s ease; }
        .dark-mode .paracicatricial-diag .scar-diag { background-color: #718096; }
        .paracicatricial-diag .emphysema-adj-diag { width: 45px; height: 45px; border: 2px dashed #D8A77F; border-radius: 20% 50% 50% 20%; z-index:1; transition: all 0.3s ease; }
        .dark-mode .paracicatricial-diag .emphysema-adj-diag { border: 2px dashed #f6ad55; }
        .honeycomb-diag-container { display: flex; flex-wrap: wrap; width: 80px; height: 80px; align-content: flex-start; justify-content: center; }
        .honeycomb-cyst-diag { width: 22px; height: 22px; border: 2px solid #8AA399; border-radius: 30%; margin:1px; background-color: rgba(138, 163, 153, 0.1); transition: all 0.3s ease; }
        .dark-mode .honeycomb-cyst-diag { border: 2px solid #68d391; background-color: rgba(104, 211, 145, 0.1); }

        .expandable-item .expand-content { display: none; margin-left: 1.5rem; margin-top: 0.5rem; padding-left: 1rem; border-left: 2px solid #A4B8C4; transition: all 0.3s ease; }
        .dark-mode .expandable-item .expand-content { border-left: 2px solid #4a5568; }
        .expandable-item.open .expand-content { display: block; }
        .expandable-item .expand-trigger { cursor: pointer; display: flex; align-items: center; }
        .expandable-item .expand-trigger::before { content: 'â–¶'; margin-right: 0.5rem; transition: transform 0.2s; font-size: 0.8em; color: #6A8EAE; }
        .dark-mode .expandable-item .expand-trigger::before { color: #90cdf4; }
        .expandable-item.open .expand-trigger::before { transform: rotate(90deg); }

        .ai-input-textarea {
            width: 100%;
            min-height: 100px;
            padding: 0.75rem;
            border: 1px solid #A4B8C4;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            background-color: white;
            color: #3D3D3D;
            transition: all 0.3s ease;
        }
        .dark-mode .ai-input-textarea {
            background-color: #2d3748;
            border: 1px solid #4a5568;
            color: #e2e8f0;
        }
        .ai-button {
            background-color: #79A2A0; /* AI Accent Color */
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: background-color 0.3s ease;
            border: none;
            cursor: pointer;
        }
        .ai-button:hover {
            background-color: #608381; /* Darker AI Accent */
        }
        .dark-mode .ai-button {
            background-color: #4fd1c5;
        }
        .dark-mode .ai-button:hover {
            background-color: #38b2ac;
        }
        .ai-result-area {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #FDFBF7;
            border: 1px solid #E6EBF0;
            border-radius: 0.5rem;
            min-height: 100px;
            white-space: pre-wrap; /* To respect newlines from API */
            font-size: 0.9rem;
            line-height: 1.6;
            transition: all 0.3s ease;
        }
        .dark-mode .ai-result-area {
            background-color: #2d3748;
            border: 1px solid #4a5568;
            color: #e2e8f0;
        }
        .loading-indicator {
            display: none; /* Hidden by default */
            text-align: center;
            padding: 1rem;
            color: #6A8EAE;
        }
        .dark-mode .loading-indicator {
            color: #90cdf4;
        }
        .ai-disclaimer {
            font-size: 0.8rem;
            color: #888;
            margin-top: 0.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }
        .dark-mode .ai-disclaimer {
            color: #a0aec0;
        }
        .theme-toggle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: #3D3D3D;
        }
        .dark-mode .theme-toggle {
            color: #e2e8f0;
        }
        .feature-badge {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background-color: #D8A77F;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: bold;
            z-index: 10;
        }
        .dark-mode .feature-badge {
            background-color: #f6ad55;
        }
        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background-color: #38b2ac;
            color: white;
            padding: 1rem;
            border-radius: 0.5rem;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <button id="themeToggle" class="theme-toggle">ğŸŒ™</button>
    <div class="notification" id="notification"></div>

    <header class="text-center mb-8 relative">
        <span class="feature-badge">è¿ç§‘ä¸€ç­å†¯ç† </span>
        <h1 class="text-3xl md:text-4xl font-bold" style="color: #6A8EAE;">è‚ºæ°”è‚¿HRCTå½±åƒäº¤äº’æŒ‡å—</h1>
        <p class="text-md text-gray-700 mt-1 dark:text-gray-300">é«˜åˆ†è¾¨ç‡CTåœ¨è‚ºæ°”è‚¿è¯Šæ–­ä¸è¯„ä¼°ä¸­çš„åº”ç”¨ (è¿ç§‘ä¸€ç­å†¯ç† )</p>
    </header>

    <nav class="flex flex-wrap justify-center border-b-2 border-gray-200 mb-6 dark:border-gray-700">
        <button class="tab-button active" onclick="showSection('overview')">æ¦‚è¿°</button>
        <button class="tab-button" onclick="showSection('mainSubtypes')">ä¸»è¦äºšå‹</button>
        <button class="tab-button" onclick="showSection('comparison')">å¯¹æ¯”ä¸åˆ†å¸ƒ</button>
        <button class="tab-button" onclick="showSection('otherTypes')">å…¶ä»–ç›¸å…³ç±»å‹</button>
        <button class="tab-button" onclick="showSection('associatedSigns')">ä¼´éšå¾è±¡</button>
        <button class="tab-button" onclick="showSection('diffDiagnosis')">é‰´åˆ«è¯Šæ–­</button>
        <button class="tab-button" onclick="showSection('aiAssistant')">âœ¨ AIåŠ©æ‰‹</button>
    </nav>

    <main class="max-w-7xl mx-auto">
        <section id="overview" class="content-section active">
            <div class="card">
                <h2 class="card-title">æ¬¢è¿æ¥åˆ°è‚ºæ°”è‚¿HRCTå½±åƒäº¤äº’æŒ‡å—</h2>
                <p class="mb-4 dark:text-gray-300">æœ¬æŒ‡å—æ—¨åœ¨é€šè¿‡äº¤äº’å¼çš„æ–¹å¼ï¼Œå¸®åŠ©æ‚¨ç†è§£è‚ºæ°”è‚¿çš„å®šä¹‰ã€ä¸åŒäºšå‹åœ¨é«˜åˆ†è¾¨ç‡CTï¼ˆHRCTï¼‰ä¸­çš„å…¸å‹å½±åƒå­¦è¡¨ç°ï¼Œä»¥åŠç›¸å…³çš„ä¸´åºŠå’Œå½±åƒå­¦ç‰¹å¾ã€‚è‚ºæ°”è‚¿æ˜¯ä¸€ç§å¸¸è§çš„æ…¢æ€§è‚ºéƒ¨ç–¾ç—…ï¼Œå‡†ç¡®çš„å½±åƒå­¦è¯„ä¼°å¯¹äºè¯Šæ–­ã€åˆ†å‹å’ŒæŒ‡å¯¼æ²»ç–—è‡³å…³é‡è¦ã€‚æ­¤ç‰ˆæœ¬æ–°å¢AIåŠ©æ‰‹åŠŸèƒ½ï¼Œå¯è¾…åŠ©æ–‡æœ¬è§£è¯»å’Œç—…ä¾‹å­¦ä¹ ã€‚</p>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="sub-card-title">ä»€ä¹ˆæ˜¯è‚ºæ°”è‚¿ï¼Ÿ</h3>
                        <æç®€p class="dark:text-gray-300">è‚ºæ°”è‚¿çš„ç—…ç†å­¦å®šä¹‰ä¸ºç»ˆæœ«ç»†æ”¯æ°”ç®¡è¿œç«¯æ°”è…”çš„å¼‚å¸¸æ°¸ä¹…æ€§æ‰©å¤§ï¼Œä¼´æœ‰è‚ºæ³¡å£çš„ç ´åï¼Œé€šå¸¸æ— æ˜æ˜¾è‚ºçº¤ç»´åŒ–ã€‚å®ƒæ˜¯æ…¢æ€§é˜»å¡æ€§è‚ºç–¾ç—…ï¼ˆCOPDï¼‰çš„ä¸€ç§ä¸»è¦ç±»å‹ï¼Œä¸é•¿æœŸå¸çƒŸç­‰å±é™©å› ç´ å¯†åˆ‡ç›¸å…³ã€‚</p>
                    </div>
                    <div>
                        <h3 class="sub-card-title">HRCTçš„ä½œç”¨</h3>
                        <p class="dark:text-gray-300">é«˜åˆ†è¾¨ç‡CTï¼ˆHRCTï¼‰æ˜¯è¯„ä¼°è‚ºæ°”è‚¿çš„é¦–é€‰å½±åƒå­¦æ–¹æ³•ã€‚å®ƒèƒ½å¤Ÿæ¸…æ™°æ˜¾ç¤ºè‚ºéƒ¨å¾®ç»†ç»“æ„ï¼Œå‡†ç¡®è¯†åˆ«è‚ºæ°”è‚¿çš„ç±»å‹ã€èŒƒå›´å’Œä¸¥é‡ç¨‹åº¦ï¼Œç”šè‡³åœ¨æ—©æœŸé˜¶æ®µå³å¯æ£€å‡ºç—…å˜ã€‚HRCTå¯¹äºä¸´åºŠå‰è‚ºæ°”è‚¿çš„å‘ç°ã€è‚ºç™Œç­›æŸ¥ä¸­çš„é£é™©è¯„ä¼°ä»¥åŠæŒ‡å¯¼ä¸ªä½“åŒ–æ²»ç–—æ–¹æ¡ˆå‡å…·æœ‰é‡è¦ä»·å€¼ã€‚</p>
                    </div>
                </div>
                 <p class="mt-4 text-sm text-gray-600 dark:text-gray-400">è¯·ä½¿ç”¨ä¸Šæ–¹å¯¼èˆªæ åˆ‡æ¢ä¸åŒç« èŠ‚ï¼Œæ·±å…¥äº†è§£è‚ºæ°”è‚¿çš„HRCTå½±åƒå­¦è¡¨ç°ï¼Œæˆ–å°è¯•æ–°çš„"AIåŠ©æ‰‹"åŠŸèƒ½ã€‚</p>
            </div>
        </section>

        <section id="mainSubtypes" class="content-section">
            <div class="card">
                <h2 class="card-title">ä¸»è¦è‚ºæ°”è‚¿äºšå‹</h2>
                <p class="mb-6 dark:text-gray-300">è‚ºæ°”è‚¿æ ¹æ®å…¶åœ¨æ¬¡çº§è‚ºå°å¶å†…çš„ç´¯åŠéƒ¨ä½å’ŒèŒƒå›´ï¼Œä¸»è¦åˆ†ä¸ºå°å¶ä¸­å¿ƒå‹ï¼ˆCLEï¼‰ã€å…¨å°å¶å‹ï¼ˆPLEï¼‰å’Œé—´éš”æ—å‹ï¼ˆPSEï¼‰ã€‚äº†è§£è¿™äº›äºšå‹çš„ç‰¹å¾å¯¹äºå‡†ç¡®è¯Šæ–­è‡³å…³é‡è¦ã€‚</p>
                <article class="mb-8 p-4 border border-gray-200 rounded-lg dark:border-gray-700">
                    <h3 class="sub-card-title" style="color:#D8A77F;">å°å¶ä¸­å¿ƒå‹è‚ºæ°”è‚¿ (Centrilobular Emphysema, CLE)</h3>
                    <div class="grid md:grid-cols-3 gap-6 items-start">
                        <div class="md:col-span-2">
                            <p class="mb-2 dark:text-gray-300"><strong class="highlight">æ ¸å¿ƒç‰¹å¾ï¼š</strong>æœ€å¸¸è§ï¼Œä¸å¸çƒŸå¯†åˆ‡ç›¸å…³ã€‚ç—…å˜èµ·å§‹äºæ¬¡çº§è‚ºå°å¶ä¸­å¤®ï¼ˆå‘¼å¸æ€§ç»†æ”¯æ°”ç®¡æ°´å¹³ï¼‰ã€‚</p>
                            <p class="mb-2 dark:text-gray-300"><strong class="highlight">HRCTåˆ†å¸ƒï¼š</strong>å…¸å‹è¡¨ç°ä¸º<span class="highlight">è‚ºä¸Šå¶ä¸ºä¸»</span>ã€åˆ†å¸ƒä¸å‡ã€‚ç—…ç¶ä¸èƒ¸è†œé¢åŠå°å¶é—´éš”ä¿æŒè·ç¦»ã€‚</p>
                            <p class="mb-2 dark:text-gray-300"><strong class="highlight">HRCTå½¢æ€ï¼š</strong></p>
                            <ul class="list-disc list-inside ml-4 space-y-1 text-sm dark:text-gray-300">
                                <li>å±€ç¶æ€§ä½å¯†åº¦åŒºï¼ˆLAAï¼‰ï¼Œé€šå¸¸<span class="highlight">æ— å£æˆ–å£æè–„</span>ã€‚</li>
                                <li>LAAä¸­å¤®å¸¸å¯è§"<span class="highlight">ä¸­å¤®ç‚¹å¾</span>"ï¼ˆå°å¶ä¸­å¤®åŠ¨è„‰ï¼‰ã€‚</li>
                                <li>æ—©æœŸè¾¹ç•Œä¸æ¸…ï¼Œæ™šæœŸå› å‘¨å›´è‚ºç»„ç»‡å—å‹è¾¹ç•Œç›¸å¯¹æ¸…æ™°ã€‚</li>
                                <li>æ™šæœŸå¯èåˆï¼Œä½†å°å¶è¾¹ç¼˜è‚ºå®è´¨å¸¸ä¿ç•™ã€‚</li>
                            </ul>
                        </div>
                        <div class="diagram-container">
                            <p class="diagram-title">CLEç¤ºæ„å›¾ (æ‚¬åœæŸ¥çœ‹)</p>
                            <div class="lobule-base-interactive" data-info="å°å¶ä¸­å¿ƒå‹ (CLE): ç—…å˜ä½äºå°å¶ä¸­å¤®ï¼Œå›´ç»•å‘¼å¸æ€§ç»†æ”¯æ°”ç®¡ã€‚å¯è§ä¸­å¤®ç‚¹ï¼ˆåŠ¨è„‰ï¼‰å’Œæ— å£/è–„å£çš„ä½å¯†åº¦åŒºã€‚">
                                <div class="cle-laa-interactive"></div>
                                <div class="cle-dot-interactive"></div>
                            </div>
                            <p class="text-xs text-center mt-2 dark:text-gray-300">ç¤ºæ„å›¾å±•ç¤ºäº†å°å¶ä¸­å¿ƒåŒºåŸŸçš„ä½å¯†åº¦æ”¹å˜å’Œä¸­å¤®å°åŠ¨è„‰ã€‚</p>
                        </div>
                    </div>
                </article>
                <article class="mb-8 p-4 border border-gray-200 rounded-lg dark:border-gray-700">
                    <h3 class="sub-card-title" style="color:#D8A77F;">å…¨å°å¶å‹è‚ºæ°”è‚¿ (Panlobular Emphysema, PLE)</h3>
                     <div class="grid md:grid-cols-3 gap-6 items-start">
                        <div class="md:col-span-2">
                            <p class="mb-2 dark:text-gray-300"><strong class="highlight">æ ¸å¿ƒç‰¹å¾ï¼š</strong>æ•´ä¸ªæ¬¡çº§è‚ºå°å¶ï¼ˆè‚ºè…ºæ³¡ï¼‰ä¸€è‡´æ€§ç ´åã€‚å…¸å‹ç—…å› ä¸ºÎ±1æŠ—èƒ°è›‹ç™½é…¶ç¼ºä¹ç—‡ã€‚</p>
                            <p class="mb-2 dark:text-gray-300"><strong class="highlight">HRCTåˆ†å¸ƒï¼š</strong>é€šå¸¸å¼¥æ¼«æ€§æ”¹å˜ï¼Œä»¥<span class="highlight">åŒè‚ºä¸‹å¶æœ€ä¸ºä¸¥é‡</span>ã€‚</p>
                            <p class="mb-2 dark:text-gray-300"><strong class="highlight">HRCTå½¢æ€ï¼š</strong></p>
                            <ul class="list-disc list-inside ml-4 space-y-1 text-sm dark:text-gray-300">
                                <li>å¼¥æ¼«æ€§ã€å‡åŒ€çš„è‚ºå®è´¨å¯†åº¦å‡ä½ï¼ˆ"<span class="highlight">é»‘è‚º</span>"å¤–è§‚ï¼‰ã€‚</li>
                                <li>è‚ºè¡€ç®¡çº¹ç†ç¨€ç–ã€çº¤ç»†ï¼Œæ•°é‡å‡å°‘ ("<span class="highlight">è¡€ç®¡å½±å‡å°‘å¾</span>")ã€‚</li>
                                <li>è½»åº¦PLEå¯èƒ½éå¸¸éšåŒ¿ï¼Œè¯Šæ–­å›°éš¾ã€‚</li>
                            </ul>
                        </div>
                        <div class="diagram-container">
                            <p class="diagram-title">PLEç¤ºæ„å›¾ (æ‚¬åœæŸ¥çœ‹)</p>
                            <div class="lobule-base-interactive" data-info="å…¨å°å¶å‹ (PLE): æ•´ä¸ªæ¬¡çº§è‚ºå°å¶å‡åŒ€å—ç´¯ï¼Œå¯¼è‡´å¼¥æ¼«æ€§å¯†åº¦å‡ä½å’Œè¡€ç®¡å½±ç¨€ç–ã€‚">
                                <div class="ple-laa-interactive">
                                    <div class="ple-vessel-interactive"></div>
                                </div>
                            </div>
                             <p class="text-xs text-center mt-2 dark:text-gray-300">ç¤ºæ„å›¾å±•ç¤ºäº†æ•´ä¸ªå°å¶çš„å¼¥æ¼«æ€§ä½å¯†åº¦å’Œè¡€ç®¡å½±å‡å°‘ã€‚</p>
                        </div>
                    </div>
                </article>
                <article class="p-4 border border-gray-200 rounded-lg dark:border-gray-700">
                    <h3 class="sub-card-title" style="color:#D8A77F;">é—´éš”æ—å‹è‚ºæ°”è‚¿ (Paraseptal Emphysema, PSE)</h3>
                    <div class="grid md:grid-cols-3 gap-6 items-start">
                        <div class="md:col-span-2">
                            <p class="mb-2 dark:text-gray-300"><strong class="highlight">æ ¸å¿ƒç‰¹å¾ï¼š</strong>ç´¯åŠè…ºæ³¡è¿œç«¯ï¼Œç´§é‚»èƒ¸è†œè¡¨é¢å’Œè‚ºå°å¶é—´éš”ã€‚å¸¸ä¸å¸çƒŸæœ‰å…³ã€‚</p>
                            <p class="mb-2 dark:text-gray-300"><strong class="highlight">HRCTåˆ†å¸ƒï¼šæç®€</strong>ç‰¹å¾æ€§åˆ†å¸ƒäº<span class="highlight">èƒ¸è†œä¸‹</span>ï¼Œå°¤å…¶å¥½å‘äºè‚ºä¸Šå¶èƒŒä¾§ã€çºµéš”æ—ç­‰ã€‚</p>
                            <p class="mb-2 dark:text-gray-300"><strong class="highlight">HRCTå½¢æ€ï¼š</strong></p>
                            <ul class="list-disc list-inside ml-4 space-y-1 text-sm dark:text-gray-300">
                                <li>é‚»è¿‘èƒ¸è†œæˆ–å°å¶é—´éš”çš„<span class="highlight">å•å±‚æˆ–å¤šå±‚è–„å£</span>å«æ°”å›Šè…”ã€‚</li>
                                <li>å›Šè…”ç›´å¾„>1cmæ—¶ç§°ä¸º<span class="highlight">è‚ºå¤§ç–±</span>ã€‚PSEææ˜“å½¢æˆè‚ºå¤§ç–±ã€‚</li>
                                <li>æ˜“å¯¼è‡´<span class="highlight">è‡ªå‘æ€§æ°”èƒ¸</span>ã€‚</li>
                            </ul>
                        </div>
                        <div class="diagram-container">
                            <p class="diagram-title">PSEç¤ºæ„å›¾ (æ‚¬åœæŸ¥çœ‹)</p>
                            <div class="lobule-base-interactive" data-info="é—´éš”æ—å‹ (PSE): ç—…å˜ä½äºå°å¶è¾¹ç¼˜ï¼Œç´§é‚»èƒ¸è†œæˆ–å°å¶é—´éš”ï¼Œå¸¸å½¢æˆè–„å£å›Šè…”æˆ–è‚ºå¤§ç–±ã€‚">
                                <div class="pse-laa-interactive pse-laa-1-interactive"></div>
                                <div class="pse-laa-interactive pse-laa-2-interactive"></div>
                                <div class="pse-laa-interactive pse-laa-3-interactive"></div>
                            </div>
                            <p class="text-xs text-center mt-2 dark:text-gray-300">ç¤ºæ„å›¾å±•ç¤ºäº†å°å¶è¾¹ç¼˜ã€èƒ¸è†œä¸‹åŒºåŸŸçš„è–„å£å›Šè…”ã€‚</p>
                        </div>
                    </div>
                </article>
            </div>
        </section>

        <section id="comparison" class="content-section">
            <div class="card">
                <h2 class="card-title">äºšå‹å¯¹æ¯”ä¸è‚ºå¶åˆ†å¸ƒ</h2>
                <p class="mb-4 dark:text-gray-300">æœ¬èŠ‚å¯¹ä¸‰ç§ä¸»è¦è‚ºæ°”è‚¿äºšå‹çš„å…³é”®HRCTç‰¹å¾è¿›è¡Œæ€»ç»“å¯¹æ¯”ï¼Œå¹¶é€šè¿‡å›¾è¡¨å½¢å¼ç¤ºæ„æ€§å±•ç¤ºå®ƒä»¬åœ¨è‚ºå¶ä¸­çš„å¸¸è§åˆ†å¸ƒè¶‹åŠ¿ã€‚</p>
                <h3 class="sub-card-title">HRCTç‰¹å¾æ¯”è¾ƒè¡¨</h3>
                <p class="text-sm text-gray-600 mb-2 dark:text-gray-400">ä¸‹è¡¨æ€»ç»“äº†å°å¶ä¸­å¿ƒå‹ï¼ˆCLEï¼‰ã€å…¨å°å¶å‹ï¼ˆPLEï¼‰å’Œé—´éš”æ—å‹ï¼ˆPSEï¼‰è‚ºæ°”è‚¿çš„å…³é”®HRCTé‰´åˆ«ç‰¹å¾å’Œä¸´åºŠå…³è”ã€‚</p>
                <div class="overflow-x-auto">
                    <table class="table-custom" id="emphysemaComparisonTable">
                        <thead>
                            <tr>
                                <th>ç‰¹å¾</th>
                                <th>å°å¶ä¸­å¿ƒå‹ (CLE)</th>
                                <th>å…¨å°å¶å‹ (PLE)</th>
                                <th>é—´éš”æ—å‹ (PSE)</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <h3 class="sub-card-title mt-8">è‚ºå¶åˆ†å¸ƒè¶‹åŠ¿ç¤ºæ„å›¾</h3>
                <p class="text-sm text-gray-600 mb-4 dark:text-gray-400">æ­¤å›¾è¡¨åŸºäºå…¸å‹æè¿°ï¼Œç¤ºæ„æ€§å±•ç¤ºå„ä¸»è¦äºšå‹åœ¨ä¸Šä¸‹è‚ºå¶çš„å¸¸è§ç´¯åŠç¨‹åº¦ã€‚è¯·æ³¨æ„è¿™ä»…ä¸ºè¶‹åŠ¿ç¤ºæ„ï¼Œä¸ªä½“å·®å¼‚å¯èƒ½å­˜åœ¨ã€‚</p>
                <div class="chart-container">
                    <canvas id="lobeDistributionChart"></canvas>
                </div>
            </div>
        </section>

        <section id="otherTypes" class="content-section">
            <div class="card">
                <h2 class="card-title">å…¶ä»–è‚ºæ°”è‚¿ç›¸å…³ç–¾ç—…</h2>
                <p class="mb-6 dark:text-gray-300">é™¤äº†ä¸‰ç§ç»å…¸äºšå‹ï¼ŒHRCTè¿˜æœ‰åŠ©äºè¯†åˆ«å…¶ä»–ä¸è‚ºæ°”è‚¿ç›¸å…³çš„ç—…ç†çŠ¶æ€ï¼Œå¦‚å¤§ç–±æ€§è‚ºæ°”è‚¿ã€ä¸è§„åˆ™/ç˜¢ç—•æ—è‚ºæ°”è‚¿ä»¥åŠåˆå¹¶è‚ºçº¤ç»´åŒ–å’Œè‚ºæ°”è‚¿ï¼ˆCPFEï¼‰ç»¼åˆå¾ã€‚</p>
                <div id="otherTypesContainer" class="space-y-6"></div>
            </div>
        </section>

        <section id="associatedSigns" class="content-section">
            <div class="card">
                <h2 class="card-title">å…³é”®ä¼´éšHRCTå¾è±¡</h2>
                <p class="mb-6 dark:text-gray-300">é™¤äº†è‚ºå®è´¨æœ¬èº«çš„ä½å¯†åº¦æ”¹å˜å¤–ï¼ŒHRCTè¿˜èƒ½æ˜¾ç¤ºä¸è‚ºæ°”è‚¿ç›¸å…³çš„å…¶ä»–é‡è¦å¾è±¡ï¼ŒåŒ…æ‹¬æ°”é“å¼‚å¸¸ã€è‚ºåŠ¨è„‰é«˜å‹çš„é—´æ¥å¾è±¡ä»¥åŠå‘¼æ°”ç›¸çš„æ°”ä½“æ»ç•™ã€‚ç‚¹å‡»æ¡ç›®å¯å±•å¼€æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚</p>
                <div id="associatedSignsContainer" class="space-y-4"></div>
            </div>
        </section>

        <section id="diffDiagnosis" class="content-section">
            <div class="card">
                <h2 class="card-title">HRCTä¸Šçš„å…³é”®é‰´åˆ«è¯Šæ–­</h2>
                <p class="mb-6 dark:text-gray-300">å‡†ç¡®è¯†åˆ«è‚ºæ°”è‚¿äºšå‹å¹¶å°†å…¶ä¸å…¶ä»–è¡¨ç°ç›¸ä¼¼çš„è‚ºéƒ¨ç–¾ç—…åŒºåˆ†å¼€æ¥ï¼Œå¯¹äºæŒ‡å¯¼ä¸´åºŠå†³ç­–è‡³å…³é‡è¦ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®çš„é‰´åˆ«ç‚¹ã€‚</p>
                <article class="mb-8 p-4 border border-gray-200 rounded-lg dark:border-gray-700">
                    <h3 class="sub-card-title">è‚ºæ°”è‚¿æ€§è…”éš™ vs. çœŸæ€§å›Šè‚¿ (å¦‚LCH, LAM)</h3>
                    <p class="mb-2 dark:text-gray-300">å…³é”®é‰´åˆ«ç‚¹åœ¨äº"<strong class="highlight">å£</strong>"ï¼š</p>
                    <ul class="list-disc list-inside ml-4 space-y-1 text-sm mb-4 dark:text-gray-300">
                        <li><strong>è‚ºæ°”è‚¿ï¼š</strong>ä½å¯†åº¦åŒºï¼ˆLAAï¼‰é€šå¸¸<span class="highlight">ç¼ºä¹å¯è§å£</span>ï¼Œæˆ–å£æè–„ã€éš¾ä»¥å¯Ÿè§‰ã€‚</li>
                        <li><strong>çœŸæ€§å›Šè‚¿ï¼š</strong>å…·æœ‰<span class="highlight">æ¸…æ™°å¯è¾¨çš„ã€å®Œæ•´çš„å£</span>ï¼ˆé€šå¸¸1-2mmåšï¼‰ã€‚</li>
                    </ul>
                    <div class="diff-diag-container">
                        <div class="diff-diag-item">
                            <div class="diff-diag-shape emphysema-no-wall-diag"></div>
                            <p class="font-semibold mt-1 dark:text-gray-300">è‚ºæ°”è‚¿ LAA</p>
                            <p class="text-xs dark:text-gray-400">(æ— å£/å£æè–„)</p>
                        </div>
                        <div class="diff-diag-item">
                            <div class="diff-diag-shape true-cyst-wall-diag"></div>
                            <p class="font-semibold mt-1 dark:text-gray-300">çœŸæ€§å›Šè‚¿</p>
                            <p class="text-xs dark:text-gray-400">(æœ‰æ¸…æ™°å¯è§å£)</p>
                        </div>
                    </div>
                    <p class="text-xs text-center mt-2 dark:text-gray-400">ç¤ºæ„å›¾å¯¹æ¯”ï¼šå·¦ä¾§ä¸ºè‚ºæ°”è‚¿æ€§ä½å¯†åº¦åŒºï¼ˆé€šå¸¸æ— å£ï¼‰ï¼Œå³ä¾§ä¸ºçœŸæ€§å›Šè‚¿ï¼ˆå…·æœ‰æ¸…æ™°çš„å£ï¼‰ã€‚</p>
                </article>
                <article class="mb-8 p-4 border border-gray-200 rounded-lg dark:border-gray-700">
                    <h3 class="sub-card-title">ä¸è§„åˆ™å‹ï¼ˆç˜¢ç—•æ—ï¼‰è‚ºæ°”è‚¿ vs. èœ‚çªè‚º</h3>
                     <p class="mb-2 dark:text-gray-300">è¿™æ˜¯ä¸€ä¸ªé‡è¦ä¸”å¸¸æœ‰éš¾åº¦çš„é‰´åˆ«ç‚¹ï¼š</p>
                     <ul class="list-disc list-inside ml-4 space-y-1 text-sm mb-4 dark:text-gray-300">
                        <li><strong>ç˜¢ç—•æ—è‚ºæ°”è‚¿ï¼š</strong>æ°”è‚¿è…”éš™é‚»è¿‘<span class="highlight">å±€ç¶æ€§ç˜¢ç—•</span>ï¼Œå½¢æ€å¯ä¸è§„åˆ™ï¼Œå…¶"å£"å¯ç”±ç˜¢ç—•æˆ–å—å‹è‚ºç»„ç»‡æ„æˆã€‚</li>
                        <li><strong>èœ‚çªè‚ºï¼š</strong>é€šå¸¸ä¸º<span class="highlight">æˆç°‡ã€èƒ¸è†œä¸‹ã€å£è¾ƒåš(1-3mm)ã€å¤šå±‚å †å </span>çš„å›Šè…”ï¼Œæ˜¯æ™šæœŸå¼¥æ¼«æ€§çº¤ç»´åŒ–ï¼ˆå¦‚UIPå‹ï¼‰çš„è¡¨ç°ã€‚</li>
                    </ul>
                    <div class="diff-diag-container">
                        <div class="diff-diag-item">
                            <div class="diff-diag-shape paracicatricial-diag flex items-center justify-center">
                                <div class="scar-diag"></div>
                                <div class="emphysema-adj-diag"></div>
                            </div>
                            <p class="font-semibold mt-1 dark:text-gray-300">ç˜¢ç—•æ—è‚ºæ°”è‚¿</p>
                             <p class="text-xs dark:text-gray-400">(é‚»è¿‘å±€ç¶ç˜¢ç—•)</p>
                        </div>
                        <div class="diff-diag-item">
                            <div class="diff-diag-shape honeycomb-diag-container">
                                <div class="honeycomb-cyst-diag"></div><div class="honeycomb-cyst-diag"></div><div class="honeycomb-cyst-diag"></div>
                                <div class="honeycomb-cyst-diag"></div><div class="honeycomb-cyst-diag"></div><div class="honeycomb-cyst-diag"></div>
                            </div>
                            <p class="font-semibold mt-1 dark:text-gray-300">èœ‚çªè‚º</p>
                            <p class="text-xs dark:text-gray-400">(æˆç°‡åšå£å›Šè…”, å¼¥æ¼«çº¤ç»´åŒ–èƒŒæ™¯)</p>
                        </div>
                    </div>
                    <p class="text-xs text-center mt-2 dark:text-gray-400">ç¤ºæ„å›¾å¯¹æ¯”ï¼šå·¦ä¾§ä¸ºç˜¢ç—•æ—è‚ºæ°”è‚¿ï¼ˆæ°”è…”é‚»è¿‘ç˜¢ç—•ï¼‰ï¼Œå³ä¾§ä¸ºèœ‚çªè‚ºï¼ˆæˆç°‡åšå£å›Šè…”ï¼Œå¸¸å †å ï¼‰ã€‚</p>
                </article>
                 <article class="p-4 border border-grayæç®€-200 rounded-lg dark:border-gray-700">
                    <h3 class="sub-card-title">å…¶ä»–é‰´åˆ«è¯Šæ–­ç‚¹</h3>
                    <ul class="list-disc list-inside ml-4 space-y-1 text-sm dark:text-gray-300">
                        <li><strong>å°å¶ä¸­å¿ƒå‹è‚ºæ°”è‚¿ vs. æ„ŸæŸ“æ€§ç»†æ”¯æ°”ç®¡ç‚ï¼ˆéæ ‘èŠ½å¾ï¼‰ï¼š</strong>å‰è€…æ…¢æ€§ï¼Œä¸å¸çƒŸç›¸å…³ï¼Œå¯è§ä¸­å¤®ç‚¹å¾ï¼›åè€…æ€¥æ€§ï¼Œå¯æœ‰ç‚ç—‡å¾è±¡ï¼Œéœ€ç»“åˆä¸´åºŠã€‚</li>
                        <li><strong>è½»åº¦å…¨å°å¶å‹è‚ºæ°”è‚¿ vs. æ­£å¸¸è‚º/å¼¥æ¼«æ€§ä½å¯†åº¦ï¼š</strong>å‰è€…HRCTè¡¨ç°éšåŒ¿ï¼Œéœ€ä»”ç»†è§‚å¯Ÿè¡€ç®¡ç¨€ç–ï¼Œå¯è€ƒè™‘QCTè¾…åŠ©ã€‚</li>
                    </ul>
                     <p class="text-xs text-gray-500 mt-2 dark:text-gray-400">å‡†ç¡®é‰´åˆ«éœ€è¦ç»¼åˆå½±åƒç‰¹å¾ã€ä¸´åºŠç—…å²å’Œå¯èƒ½çš„è¾…åŠ©æ£€æŸ¥ã€‚</p>
                </article>
            </div>
        </section>

        <section id="aiAssistant" class="content-section">
            <div class="card">
                <h2 class="card-title">âœ¨ AI åŠ©æ‰‹</h2>
                <p class="mb-6 dark:text-gray-300">æ¬¢è¿ä½¿ç”¨AIåŠ©æ‰‹åŠŸèƒ½ï¼è¿™äº›å·¥å…·æ—¨åœ¨è¾…åŠ©æ‚¨ç†è§£HRCTæŠ¥å‘Šæ–‡æœ¬å’Œå­¦ä¹ ç—…ä¾‹ã€‚è¯·æ³¨æ„ï¼ŒAIç”Ÿæˆçš„å†…å®¹ä»…ä¾›å‚è€ƒå’Œå­¦ä¹ ï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—å»ºè®®ã€‚</p>

                <article class="mb-8 p-4 border border-gray-200 rounded-lg dark:border-gray-700">
                    <h3 class="ai-feature-title">AIæ™ºèƒ½è§£è¯»HRCTæ–‡æœ¬</h3>
                    <p class="text-sm text-gray-600 mb-2 dark:text-gray-400">è¯·åœ¨ä¸‹æ–¹æ–‡æœ¬æ¡†ä¸­ç²˜è´´HRCTæŠ¥å‘Šä¸­å…³äºè‚ºæ°”è‚¿çš„æè¿°æ€§æ–‡æœ¬ï¼ŒAIå°†å°è¯•åˆ†æå¹¶æå–å…³é”®ä¿¡æ¯ã€‚</p>
                    <textarea id="hrctTextInput" class="ai-input-textarea" placeholder="ä¾‹å¦‚ï¼šåŒè‚ºä¸Šå¶å¯è§å¤šå‘å°å¶ä¸­å¿ƒå‹ä½å¯†åº¦é€äº®åŒºï¼Œéƒ¨åˆ†èåˆï¼Œæœªè§æ˜ç¡®åšå£ã€‚ä½™è‚ºé‡æ¸…æ™°..."></textarea>
                    <button id="analyzeHrctTextButton" class="ai-button">âœ¨ AIæ™ºèƒ½è§£è¯»</button>
                    <div id="hrctAnalysisLoading" class="loading-indicator">AIæ­£åœ¨åˆ†æä¸­ï¼Œè¯·ç¨å€™...</div>
                    <div id="hrctAnalysisResult" class="ai-result-area" style="display: none;"></div>
                    <p class="ai-disclaimer">AIåˆ†æç»“æœåŸºäºæ¨¡å‹ç†è§£ï¼Œå¯èƒ½å­˜åœ¨ä¸å‡†ç¡®ä¹‹å¤„ï¼Œè¯·è¾©è¯çœ‹å¾…ã€‚</p>
                </article>

                <article class="p-4 border border-gray-200 rounded-lg dark:border-gray-700">
                    <h3 class="ai-feature-title">AIç—…ä¾‹å­¦ä¹ åŠ©æ‰‹</h3>
                    <p class="text-sm text-gray-600 mb-2 dark:text-gray-400">è¯·ç®€è¦æè¿°ä¸€ä¸ªç—…ä¾‹ï¼ˆä¾‹å¦‚ï¼šæ‚£è€…å¹´é¾„ã€æ€§åˆ«ã€ä¸»è¦ç—‡çŠ¶ã€HRCTå…³é”®å‘ç°ï¼‰ï¼ŒAIå°†æä¾›ç›¸å…³çš„å­¦ä¹ æç¤ºå’Œæ¢è®¨æ–¹å‘ã€‚</p>
                    <textarea id="caseStudyInput" class="ai-input-textarea" placeholder="ä¾‹å¦‚ï¼šç”·æ€§ï¼Œ68å²ï¼Œé•¿æœŸå¸çƒŸå²ï¼Œæ´»åŠ¨åæ°”ä¿ƒã€‚HRCTç¤ºåŒè‚ºä¸‹å¶ä¸ºä¸»å¼¥æ¼«æ€§å¯†åº¦å‡ä½ï¼Œè¡€ç®¡å½±ç¨€ç–..."></textarea>
                    <button id="analyzeCaseStudyButton" class="ai-button">âœ¨ AIå­¦ä¹ æç¤º</button>
                    <div id="caseStudyLoading" class="loading-indicator">AIæ­£åœ¨ç”Ÿæˆå­¦ä¹ æç¤ºï¼Œè¯·ç¨å€™...</div>
                    <div id="caseStudyResult" class="ai-result-area" style="display: none;"></div>
                    <p class="ai-disclaimer">AIå­¦ä¹ æç¤ºæ—¨åœ¨å¯å‘æ€è€ƒï¼Œä¸æ„æˆè¯Šæ–­å»ºè®®ã€‚</p>
                </article>
            </div>
        </section>

    </main>

    <footer class="text-center py-8 mt-12 border-t border-gray-300 dark:border-gray-700">
        <p class="text-sm text-gray-600 dark:text-gray-400">&copy; 2024 è‚ºæ°”è‚¿HRCTå½±åƒäº¤äº’æŒ‡å—ã€‚å†…å®¹ä»…ä¾›å­¦ä¹ å‚è€ƒï¼Œä¸ä½œä¸ºä¸´åºŠè¯Šæ–­ä¾æ®ã€‚AIåŠŸèƒ½ç»“æœä»…ä¾›å‚è€ƒã€‚</p>
    </footer>

    <script>
        // æš—é»‘æ¨¡å¼åˆ‡æ¢
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark-mode');
            themeToggle.textContent = document.documentElement.classList.contains('dark-mode') ? 'â˜€ï¸' : 'ğŸŒ™';
        });
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.backgroundColor = type === 'error' ? '#e53e3e' : '#38b2ac';
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // æ ‡ç­¾åˆ‡æ¢åŠŸèƒ½
        const sections = document.querySelectorAll('.content-section');
        const tabButtons = document.querySelectorAll('.tab-button');

        function showSection(sectionId) {
            sections.forEach(section => {
                section.classList.toggle('active', section.id === sectionId);
            });
            tabButtons.forEach(button => {
                button.classList.toggle('active', button.getAttribute('onclick').includes(sectionId));
            });
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // æ¯”è¾ƒè¡¨æ ¼æ•°æ®
        const comparisonData = [
            { feature: "ä¸»è¦è‚ºå¶åˆ†å¸ƒ", cle: "ä¸Šå¶ä¸ºä¸»", ple: "ä¸‹å¶ä¸ºä¸»ï¼ˆå°¤å…¶åœ¨AATç¼ºä¹ç—‡ä¸­ï¼‰ï¼›å¯å¼¥æ¼«åˆ†å¸ƒ", pse: "ä¸Šå¶å¤šè§ï¼Œç´§é‚»èƒ¸è†œ/é—´éš”" },
            { feature: "æ¬¡çº§è‚ºå°å¶å†…åˆ†å¸ƒ", cle: "å°å¶ä¸­å¤®", ple: "ç´¯åŠæ•´ä¸ªæ¬¡çº§è‚ºå°å¶", pse: "å°å¶è¾¹ç¼˜ï¼Œèƒ¸è†œä¸‹" },
            { feature: "ä½å¯†åº¦åŒºå½¢æ€", cle: "å±€ç¶æ€§ï¼Œå¸¸åœ†å½¢/åµåœ†å½¢ï¼›å¯è§â€œä¸­å¤®ç‚¹å¾â€ï¼›æ— å£æˆ–å£ä¸æ˜æ˜¾ã€‚", ple: "å¼¥æ¼«æ€§å¯†åº¦å‡ä½ï¼›è‚ºå®è´¨â€œç®€åŒ–â€ï¼›è‚ºè¡€ç®¡å½±ç¨€ç–ã€‚", pse: "é‚»è¿‘èƒ¸è†œ/é—´éš”çš„å›Šè…”ï¼Œè¾¹ç•Œæ¸…æ™°ï¼Œå¸¸æœ‰è–„å£ã€‚" },
            { feature: "ç›¸å…³è‚ºå¤§ç–±", cle: "å¯è§ï¼Œå°¤å…¶åœ¨èåˆ/æ™šæœŸ", ple: "ä¸ä½œä¸ºä¸»è¦ç‰¹å¾ï¼Œé™¤éæ™šæœŸ", pse: "éå¸¸å¸¸è§ï¼Œå¸¸ä¸ºä¸»è¦è¡¨ç°" },
            { feature: "å…³é”®ä¸´åºŠè”ç³»", cle: "ä¸å¸çƒŸå¯†åˆ‡ç›¸å…³", ple: "Î±1æŠ—èƒ°è›‹ç™½é…¶ç¼ºä¹ç—‡ï¼ˆå…¸å‹ï¼‰", pse: "è‡ªå‘æ€§æ°”èƒ¸ï¼Œå­¤ç«‹å­˜åœ¨æ—¶å¸¸æ— ç—‡çŠ¶" }
        ];

        // å¡«å……æ¯”è¾ƒè¡¨æ ¼
        function populateComparisonTable() {
            const tableBody = document.getElementById('emphysemaComparisonTable').getElementsByTagName('tbody')[0];
            comparisonData.forEach(item => {
                const row = tableBody.insertRow();
                row.insertCell().innerHTML = `<strong>${item.feature}</strong>`;
                row.insertCell().textContent = item.cle;
                row.insertCell().textContent = item.ple;
                row.insertCell().textContent = item.pse;
            });
        }
        
        // å¤„ç†å›¾è¡¨æ ‡ç­¾
        function processChartLabel(label, maxLength = 16) {
            if (typeof label !== 'string' || label.length <= maxLength) return label;
            const words = label.split(/(\s+)/);
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if (word.trim() === '') { currentLine += word; continue; }
                if ((currentLine + word).length > maxLength && currentLine.trim().length > 0) {
                    lines.push(currentLine.trim());
                    currentLine = word;
                } else {
                    currentLine += word;
                }
            }
            if (currentLine.trim().length > 0) lines.push(currentLine.trim());
            return lines.length > 0 ? lines : [label];
        }

        // å›¾è¡¨å·¥å…·æç¤ºå›è°ƒ
        const chartTooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            return Array.isArray(label) ? label.join(' ') : label;
        };

        // åˆ›å»ºè‚ºå¶åˆ†å¸ƒå›¾è¡¨
        function createLobeDistributionChart() {
            const ctx = document.getElementById('lobeDistributionChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['å°å¶ä¸­å¿ƒå‹ (CLE)', 'å…¨å°å¶å‹ (PLE)', 'é—´éš”æ—å‹ (PSE)'].map(label => processChartLabel(label)),
                    datasets: [
                        { label: 'ä¸Šå¶ç´¯åŠç¨‹åº¦', data: [3, 1.5, 2.5], backgroundColor: '#D8A77F', borderColor: '#C68662', borderWidth: 1 },
                        { label: 'ä¸‹å¶ç´¯åŠç¨‹åº¦', data: [1, 3, 1.5], backgroundColor: '#8AA399', borderColor: '#6F8A7D', borderWidth: 1 }
                    ]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'ç´¯åŠç¨‹åº¦ (ç¤ºæ„)' }, ticks: { callback: v => ['æ— ','è½»','ä¸­','é‡'][v] || '', color: '#3D3D3D' }, grid: { color: '#A4B8C4' } },
                        x: { ticks: { color: '#3D3D3D' }, grid: { display: false } }
                    },
                    plugins: { tooltip: { callbacks: { title: chartTooltipTitleCallback } }, legend: { position: 'top', labels: { color: '#3D3D3D' } } }
                }
            });
        }

        // å…¶ä»–ç±»å‹æ•°æ®
        const otherTypesData = [
            { title: "å¤§ç–±æ€§è‚ºæ°”è‚¿ä¸è‚ºå¤§ç–±", icon: "ğŸ’¨", content: "<strong>è‚ºå¤§ç–±å®šä¹‰ï¼š</strong>ç›´å¾„â‰¥1cmã€å£è–„ï¼ˆâ‰¤1mmï¼‰çš„å«æ°”å›Šè…”ã€‚å¸¸ä½äºèƒ¸è†œä¸‹ï¼Œå°¤ä»¥PSEå¸¸è§ã€‚<br><strong>å¤§ç–±æ€§è‚ºæ°”è‚¿ï¼š</strong>å½“è‚ºå¤§ç–±æˆä¸ºä¸»è¦å½±åƒç‰¹å¾æ—¶ã€‚" },
            { title: "ä¸è§„åˆ™å‹ï¼ˆç˜¢ç—•æ—ï¼‰è‚ºæ°”è‚¿", icon: "ğŸ©¹", content: "<strong>å®šä¹‰ï¼š</strong>é‚»è¿‘è‚ºéƒ¨ç˜¢ç—•å‘ç”Ÿçš„è‚ºæ°”è‚¿ã€‚<br><strong>HRCTè¡¨ç°ï¼š</strong>é‚»è¿‘ç˜¢ç—•çš„å±€ç¶æ€§è‚ºæ°”è‚¿æ ·é€äº®åŒºã€‚<br><strong>å…³é”®é‰´åˆ«ï¼š</strong>éœ€ä¸èœ‚çªè‚ºé‰´åˆ«ã€‚" },
            { title: "åˆå¹¶è‚ºçº¤ç»´åŒ–å’Œè‚ºæ°”è‚¿ (CPFE)", icon: "ğŸ”„", content: "<strong>å®šä¹‰ï¼š</strong>è‚ºæ°”è‚¿ï¼ˆä¸Šå¶ï¼‰å’Œè‚ºçº¤ç»´åŒ–ï¼ˆä¸‹å¶ï¼‰åŒæ—¶å­˜åœ¨ã€‚<br><strong>å…¸å‹HRCTï¼š</å¼º>ä¸Šå¶è‚ºæ°”è‚¿ + ä¸‹å¶è‚ºçº¤ç»´åŒ–ã€‚<br><strong>ä¸´åºŠç‰¹ç‚¹ï¼š</strong>DLCOæ˜¾è‘—é™ä½ã€‚" }
        ];
        
        // ä¼´éšå¾è±¡æ•°æ®
        const associatedSignsData = [
            { title: "æ°”é“å¼‚å¸¸", icon: "ğŸŒ¬ï¸", details: ["<strong>æ”¯æ°”ç®¡å£å¢åš (BWT)</strong>", "<strong>æ”¯æ°”ç®¡/ç»†æ”¯æ°”ç®¡æ‰©å¼ </strong>", "<strong>å°æ°”é“ç—…å˜ (SAD) å¾è±¡</strong>"] },
            { title: "è‚ºåŠ¨è„‰é«˜å‹ (PHT) å¾è±¡", icon: "â¤ï¸â€ğŸ©¹", details: ["<strong>ä¸»è‚ºåŠ¨è„‰æ‰©å¼ </strong>", "<strong>å³å¿ƒå®¤(RV)/å³å¿ƒæˆ¿(RA)æ‰©å¤§</strong>", "<strong>å®¤é—´éš”å˜å¹³æˆ–å·¦å</strong>"] },
            { title: "å‘¼æ°”ç›¸HRCTä¸Šçš„æ°”ä½“æ»ç•™", icon: "ğŸ”’", details: ["<strong>å®šä¹‰ï¼š</strong>å‘¼æ°”æœ«è‚ºå®è´¨å¯†åº¦å¢é«˜ä¸è¶³ã€‚", "<strong>æ„ä¹‰ï¼š</strong>å°æ°”é“é˜»å¡çš„ç¡®åˆ‡å¾è±¡ã€‚"] }
        ];

        // åˆ›å»ºå¯å±•å¼€é¡¹ç›®
        function createExpandableItem(itemData, containerId) {
            const container = document.getElementById(containerId);
            const article = document.createElement('article');
            article.className = 'expandable-item p-4 border border-gray-200 rounded-lg dark:border-gray-700';
            article.innerHTML = `
                <h3 class="sub-card-title expand-trigger text-lg">${itemData.icon ? itemData.icon + ' ' : ''}${itemData.title}</h3>
                <div class="expand-content text-sm space-y-1 dark:text-gray-300">
                    ${itemData.content ? `<p>${itemData.content}</p>` : ''}
                    ${itemData.details ? `<ul class="list-disc list-inside">${itemData.details.map(d => `<li>${d}</li>`).join('')}</ul>` : ''}
                </div>`;
            container.appendChild(article);
            article.querySelector('.expand-trigger').addEventListener('click', () => article.classList.toggle('open'));
        }

        // AIåŠŸèƒ½æ¨¡æ‹Ÿ
        function simulateAIResponse(prompt, isCaseStudy = false) {
            return new Promise(resolve => {
                setTimeout(() => {
                    if (isCaseStudy) {
                        resolve({
                            likely_diagnosis_emphysema: "å…¨å°å¶å‹è‚ºæ°”è‚¿ (PLE)",
                            key_hrct_features_to_note: [
                                "åŒè‚ºä¸‹å¶ä¸ºä¸»å¼¥æ¼«æ€§å¯†åº¦å‡ä½",
                                "è‚ºè¡€ç®¡çº¹ç†ç¨€ç–ã€çº¤ç»†",
                                "è‚ºå®è´¨å‘ˆ'é»‘è‚º'å¤–è§‚"
                            ],
                            further_learning_questions: [
                                "Î±1æŠ—èƒ°è›‹ç™½é…¶ç¼ºä¹ç—‡åœ¨PLEè¯Šæ–­ä¸­çš„æ„ä¹‰ï¼Ÿ",
                                "å¦‚ä½•åŒºåˆ†è½»åº¦PLEä¸æ­£å¸¸è‚ºç»„ç»‡ï¼Ÿ",
                                "PLEæ‚£è€…è‚ºåŠŸèƒ½æ£€æŸ¥çš„å…¸å‹è¡¨ç°ï¼Ÿ"
                            ],
                            potential_ddx: [
                                "æ·‹å·´ç®¡å¹³æ»‘è‚Œç˜¤ç—… (LAM)",
                                "æœ—æ ¼æ±‰æ–¯ç»†èƒç»„ç»‡ç»†èƒå¢ç”Ÿç—‡ (LCH)",
                                "æ”¯æ°”ç®¡æ‰©å¼ ç—‡"
                            ]
                        });
                    } else {
                        resolve({
                            mentioned_emphysema_types: ["å°å¶ä¸­å¿ƒå‹ (CLE)"],
                            key_findings: [
                                "åŒè‚ºä¸Šå¶å¤šå‘å°å¶ä¸­å¿ƒå‹ä½å¯†åº¦é€äº®åŒº",
                                "éƒ¨åˆ†èåˆåŒºåŸŸ",
                                "æœªè§æ˜ç¡®åšå£"
                            ],
                            potential_severity_indicators: [
                                "å¤šå‘ä½å¯†åº¦åŒº",
                                "éƒ¨åˆ†èåˆåŒºåŸŸ",
                                "ä»¥ä¸Šå¶ä¸ºä¸»"
                            ],
                            associated_conditions_hints: [
                                "æœªè§æ˜æ˜¾çº¤ç»´åŒ–å¾è±¡",
                                "æœªè§æ˜æ˜¾è‚ºå¤§ç–±å½¢æˆ"
                            ],
                            summary: "HRCTè¡¨ç°ç¬¦åˆå…¸å‹çš„å°å¶ä¸­å¿ƒå‹è‚ºæ°”è‚¿ï¼Œä¸»è¦ç´¯åŠåŒè‚ºä¸Šå¶ï¼Œå¯è§å¤šå‘ä½å¯†åº¦é€äº®åŒºï¼Œéƒ¨åˆ†åŒºåŸŸèåˆï¼Œä½†æœªè§æ˜ç¡®åšå£ã€‚æœªå‘ç°æ˜æ˜¾è‚ºå¤§ç–±æˆ–çº¤ç»´åŒ–å¾è±¡ã€‚"
                        });
                    }
                }, 1500);
            });
        }

        // HRCTæ–‡æœ¬åˆ†æ
        const hrctAnalysisButton = document.getElementById('analyzeHrctTextButton');
        const hrctTextInput = document.getElementById('hrctTextInput');
        const hrctAnalysisResultDiv = document.getElementById('hrctAnalysisResult');
        const hrctAnalysisLoadingDiv = document.getElementById('hrctAnalysisLoading');

        hrctAnalysisButton.addEventListener('click', async () => {
            const inputText = hrctTextInput.value.trim();
            if (!inputText) {
                showNotification("è¯·è¾“å…¥HRCTæ–‡æœ¬æè¿°", "error");
                return;
            }
            hrctAnalysisLoadingDiv.style.display = 'block';
            hrctAnalysisResultDiv.style.display = 'none';

            try {
                const result = await simulateAIResponse(inputText);
                hrctAnalysisLoadingDiv.style.display = 'none';
                hrctAnalysisResultDiv.style.display = 'block';

                let htmlOutput = `<h4 class="font-bold mb-2">AIæ™ºèƒ½è§£è¯»ç»“æœï¼š</h4>`;
                htmlOutput += `<p><strong>æ€»ç»“ï¼š</strong> ${result.summary || 'æ— '}</p>`;
                htmlOutput += `<p><strong>æåŠçš„è‚ºæ°”è‚¿ç±»å‹ï¼š</strong> ${result.mentioned_emphysema_types && result.mentioned_emphysema_types.length > 0 ? result.mentioned_emphysema_types.join('ï¼Œ') : 'æœªæåŠæˆ–æœªèƒ½è¯†åˆ«'}</p>`;
                htmlOutput += `<p><strong>å…³é”®å½±åƒå­¦å‘ç°ï¼š</strong> ${result.key_findings && result.key_findings.length > 0 ? result.key_findings.join('ï¼› ') : 'æœªæåŠæˆ–æœªèƒ½è¯†åˆ«'}</p>`;
                htmlOutput += `<p><strong>å¯èƒ½çš„ä¸¥é‡ç¨‹åº¦æŒ‡æ ‡ï¼š</strong> ${result.potential_severity_indicators && result.potential_severity_indicators.length > 0 ? result.potential_severity_indicators.join('ï¼› ') : 'æœªæåŠæˆ–æœªèƒ½è¯†åˆ«'}</p>`;
                htmlOutput += `<p><strong>ä¼´éšç–¾ç—…çº¿ç´¢ï¼š</strong> ${result.associated_conditions_hints && result.associated_conditions_hints.length > 0 ? result.associated_conditions_hints.join('ï¼› ') : 'æœªæåŠæˆ–æœªèƒ½è¯†åˆ«'}</p>`;
                hrctAnalysisResultDiv.innerHTML = htmlOutput;
            } catch (e) {
                hrctAnalysisLoadingDiv.style.display = 'none';
                hrctAnalysisResultDiv.style.display = 'block';
                hrctAnalysisResultDiv.innerHTML = `<p class="text-red-600"><strong>AIåˆ†æå‡ºé”™ï¼š</strong> ${e.message}</p>`;
            }
        });

        // ç—…ä¾‹å­¦ä¹ åˆ†æ
        const caseStudyButton = document.getElementById('analyzeCaseStudyButton');
        const caseStudyInput = document.getElementById('caseStudyInput');
        const caseStudyResultDiv = document.getElementById('caseStudyResult');
        const caseStudyLoadingDiv = document.getElementById('caseStudyLoading');

        caseStudyButton.addEventListener('click', async () => {
            const inputText = caseStudyInput.value.trim();
            if (!inputText) {
                showNotification("è¯·è¾“å…¥ç—…ä¾‹ç®€è¦æè¿°", "error");
                return;
            }
            caseStudyLoadingDiv.style.display = 'block';
            caseStudyResultDiv.style.display = 'none';

            try {
                const result = await simulateAIResponse(inputText, true);
                caseStudyLoadingDiv.style.display = 'none';
                caseStudyResultDiv.style.display = 'block';

                let htmlOutput = `<h4 class="font-bold mb-2">AIç—…ä¾‹å­¦ä¹ åŠ©æ‰‹æç¤ºï¼š</h4>`;
                htmlOutput += `<p><strong>å¯èƒ½çš„è‚ºæ°”è‚¿è¯Šæ–­/äºšå‹ï¼š</strong> ${result.likely_diagnosis_emphysema || 'æœªèƒ½ç¡®å®š'}</p>`;
                htmlOutput += `<p><strong>å€¼å¾—æ³¨æ„çš„å…³é”®HRCTç‰¹å¾ï¼š</strong></p><ul class="list-disc list-inside pl-4">${result.key_hrct_features_to_note && result.key_hrct_features_to_note.length > 0 ? result.key_hrct_features_to_note.map(f => `<li>${f}</li>`).join('') : '<li>æœªèƒ½è¯†åˆ«å…·ä½“ç‰¹å¾</li>'}</ul>`;
                htmlOutput += `<p class="mt-2"><strong>è¿›ä¸€æ­¥å­¦ä¹ é—®é¢˜/æ¢è®¨æ–¹å‘ï¼š</strong></p><ul class="list-disc list-inside pl-4">${result.further_learning_questions && result.further_learning_questions.length > 0 ? result.further_learning_questions.map(q => `<li>${q}</li>`).join('') : '<li>æ— ç‰¹å®šå»ºè®®</li>'}</ul>`;
                htmlOutput += `<p class="mt-2"><strong>å¯èƒ½çš„é‰´åˆ«è¯Šæ–­æ–¹å‘ï¼š</strong></p><ul class="list-disc list-inside pl-4">${result.potential_ddx && result.potential_ddx.length > 0 ? result.potential_ddx.map(d => `<li>${d}</li>`).join('') : '<li>æ— ç‰¹å®šå»ºè®®</li>'}</ul>`;
                caseStudyResultDiv.innerHTML = htmlOutput;
            } catch (e) {
                caseStudyLoadingDiv.style.display = 'none';
                caseStudyResultDiv.style.display = 'block';
                caseStudyResultDiv.innerHTML = `<p class="text-red-600"><strong>AIå­¦ä¹ æç¤ºç”Ÿæˆå‡ºé”™ï¼š</strong> ${e.message}</p>`;
            }
        });
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            populateComparisonTable();
            createLobeDistributionChart();
            otherTypesData.forEach(item => createExpandableItem(item, 'otherTypesContainer'));
            associatedSignsData.forEach(item => createExpandableItem(item, 'associatedSignsContainer'));
            showSection('overview');
            
            // ä¸ºæ¼”ç¤ºæä¾›é»˜è®¤æ–‡æœ¬
            hrctTextInput.value = "åŒè‚ºä¸Šå¶å¯è§å¤šå‘å°å¶ä¸­å¿ƒå‹ä½å¯†åº¦é€äº®åŒºï¼Œéƒ¨åˆ†èåˆï¼Œæœªè§æ˜ç¡®åšå£ã€‚ä½™è‚ºé‡æ¸…æ™°ï¼Œè‚ºè¡€ç®¡çº¹ç†åˆ†å¸ƒæ­£å¸¸ï¼Œæœªè§æ˜æ˜¾è‚ºå¤§ç–±æˆ–çº¤ç»´åŒ–å¾è±¡ã€‚";
            caseStudyInput.value = "ç”·æ€§ï¼Œ68å²ï¼Œé•¿æœŸå¸çƒŸå²ï¼Œæ´»åŠ¨åæ°”ä¿ƒã€‚HRCTç¤ºåŒè‚ºä¸‹å¶ä¸ºä¸»å¼¥æ¼«æ€§å¯†åº¦å‡ä½ï¼Œè¡€ç®¡å½±ç¨€ç–ï¼Œè‚ºå®è´¨å‘ˆ'é»‘è‚º'å¤–è§‚ã€‚";
        });
    </script>
</body>
</html>
